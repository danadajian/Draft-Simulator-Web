import unittest
from src.main.exp.LegacyOptimizer import *

salary_dict = {'Patrick Mahomes': 8700, 'Cam Newton': 7900, 'Dak Prescott': 7500, 'Baker Mayfield': 7900, 'Jameis Winston': 7500, 'Christian McCaffrey': 8900, 'Matt Ryan': 8000, 'Tom Brady': 7300, 'Ben Roethlisberger': 7600, 'Philip Rivers': 7500, 'Jared Goff': 7800, 'Carson Wentz': 7600, 'Kyler Murray': 7300, 'Nick Foles': 6500, 'Lamar Jackson': 7400, 'Kirk Cousins': 7400, 'Russell Wilson': 8200, 'Josh Allen': 6900, 'Saquon Barkley': 9200, 'Matthew Stafford': 6600, 'Ezekiel Elliott': 9100, 'Jimmy Garoppolo': 7200, 'Ryan Fitzpatrick': 6200, 'Marcus Mariota': 6500, 'Julio Jones': 7000, 'Andy Dalton': 6500, 'Austin Ekeler': 6400, 'Dalvin Cook': 7400, 'Sam Darnold': 6700, 'Nick Chubb': 7400, 'Kerryon Johnson': 7000, 'JuJu Smith-Schuster': 8100, 'Eli Manning': 6400, "Le'Veon Bell": 7000, 'Odell Beckham Jr.': 8200, 'Leonard Fournette': 7200, 'Chris Carson': 6600, 'Travis Kelce': 7800, 'David Johnson': 8100, 'James Conner': 7700, 'Jacoby Brissett': 6000, 'Case Keenum': 6200, 'Stefon Diggs': 7200, 'Dede Westbrook': 5900, 'Mike Evans': 7900, 'Julian Edelman': 7100, 'Todd Gurley II': 7600, 'Tyler Boyd': 6900, 'Adam Thielen': 7400, 'Tyreek Hill': 4500, 'Keenan Allen': 7700, 'Joe Mixon': 7800, 'Robert Woods': 7000, 'Kenny Golladay': 6900, 'Devonta Freeman': 6700, 'George Kittle': 7300, 'Amari Cooper': 7500, 'Chris Godwin': 6900, 'Calvin Ridley': 6500, 'Corey Davis': 6200, 'DJ Moore': 6200, 'Evan Engram': 6400, 'Zach Ertz': 7100, 'Derrick Henry': 6800, 'Brandin Cooks': 7000, 'Sammy Watkins': 6300, 'Jarvis Landry': 6300, 'Cooper Kupp': 6800, 'Larry Fitzgerald': 5900, 'Damien Williams': 6900, 'James White': 6300, 'Marlon Mack': 6900, 'Christian Kirk': 6000, 'Mark Ingram II': 6600, 'Sony Michel': 6600, 'Tyler Lockett': 6800, 'Josh Gordon': 6300, 'Dion Lewis': 5600, 'Donte Moncrief': 5400, 'C.J. Anderson': 5300, 'Tevin Coleman': 6300, 'Robby Anderson': 6300, 'DeVante Parker': 5300, 'Vance McDonald': 5600, 'Mohamed Sanu': 5300, 'Justin Jackson': 5900, 'Alshon Jeffery': 6700, 'Albert Wilson': 5000, 'O.J. Howard': 6500, 'Peyton Barber': 5500, 'Mike Williams': 6400, 'Matt Breida': 5400, 'T.Y. Hilton': 7700, 'Jamison Crowder': 5400, 'Kenyan Drake': 6000, 'Randall Cobb': 5000, 'Curtis Samuel': 5900, 'Hunter Henry': 7000, 'Devin Singletary': 5300, 'Miles Sanders': 6000, 'Dante Pettis': 6500, 'Sterling Shepard': 6000, 'Danny Amendola': 4900, 'Quincy Enunwa': 5200, 'Adam Humphries': 5200, 'Ryquell Armstead': 4500, 'Robert Foster': 5700, 'David Njoku': 4500, 'Jordan Howard': 5800, 'Marvin Jones Jr.': 6100, 'Austin Hooper': 4900, 'DeSean Jackson': 5600, 'John Brown': 5500, 'Rashaad Penny': 5900, 'John Ross III': 5400, 'Jakeem Grant': 4500, 'Cole Beasley': 4800, 'Zay Jones': 5000, 'Michael Crabtree': 4600, 'Michael Gallup': 5600, 'Breshad Perriman': 4800, 'Nyheim Hines': 5300, 'Frank Gore': 4900, 'Will Dissly': 4000, 'Chris Thompson': 5100, 'Justice Hill': 5000, 'Alexander Mattison': 4900, 'Phillip Dorsett II': 4900, 'Chris Conley': 4500, 'Deebo Samuel': 5200, 'Marquise Goodwin': 5400, 'Willie Snead IV': 4800, 'Greg Olsen': 6000, 'Derrius Guice': 5900, 'Marquise Brown': 5000, 'Paul Richardson Jr.': 4900, 'Kalen Ballage': 5700, 'Rashard Higgins': 4500, 'Dallas Goedert': 5000, 'Darren Sproles': 4600, 'Kyle Rudolph': 5800, 'David Moore': 5200, 'Nelson Agholor': 5000, 'Tony Pollard': 5200, 'T.J. Hockenson': 4900, 'Giovani Bernard': 5200, 'LeSean McCoy': 5800, 'Darrell Henderson Jr.': 5400, 'Matt LaCosse': 4500, 'Jordan Reed': 8500, 'Marqise Lee': 5000, 'Adrian Peterson': 5600, 'Vernon Davis': 7000, 'Gerald Everett': 4500, 'Eric Ebron': 5500, 'Ito Smith': 5400, 'Ty Montgomery': 5600, 'Geoff Swaim': 6000, 'Trey Quinn': 4900, 'Jaylen Samuels': 5400, 'Nick Vannett': 4500, 'Blake Jarwin': 6000, 'Ronald Jones II': 5600, 'Ryan Griffin': 4000, 'Delanie Walker': 6500, 'Tajae Sharpe': 4500, 'Terry McLaurin': 4500, 'Dontrell Hilliard': 4800, 'Dontrelle Inman': 4500, 'James Washington': 5500, 'T.J. Yeldon': 4600, 'Mark Andrews': 5400, 'Gus Edwards': 4800, 'Malcolm Brown': 4900, 'Charles Clay': 4200, 'Chris Hogan': 4600, 'Jarius Wright': 4700, 'Mecole Hardman': 5100, 'DJ Chark Jr.': 4900, 'Tyler Higbee': 4000, 'Rex Burkhead': 4800, 'Andy Isabella': 4600, 'Mike Gesicki': 4900, 'Josh Oliver': 4500, 'Devin Funchess': 5600, 'Jason Witten': 4700, 'Chad Beebe': 4800, 'Tyler Eifert': 5200, 'Zach Gentry': 4000, 'Ryan Switzer': 4500, 'Travis Benjamin': 4900, 'Alex Erickson': 4500, 'Jonnu Smith': 4000, 'Miles Boykin': 4500, 'Allen Hurns': 4500, 'Jalen Hurd': 4500, 'Darwin Thompson': 4500, 'JJ Arcega-Whiteside': 4800, 'Drew Sample': 4000, 'Jesse James': 4000, 'Chris Lacy': 4500, 'Maxx Williams': 4100, 'Demarcus Robinson': 4800, 'Cameron Brate': 4800, 'Wayne Gallman Jr.': 4500, 'Justin Watson': 4500, "Nick O'Leary": 4000, 'DK Metcalf': 5500, 'Jaron Brown': 4500, 'Jack Doyle': 5400, 'Kyle Juszczyk': 4600, 'Ian Thomas': 4600, "James O'Shaughnessy": 4000, 'Bennie Fowler III': 4500, 'Chase Edmonds': 5100, 'Cody Latimer': 5500, 'Lance Kendricks': 4100, 'Demaryius Thomas': 4700, 'Preston Williams': 4500, 'Deon Cain': 4500, 'Seth Roberts': 4500, 'Dawson Knox': 4600, 'Tavon Austin': 4500, 'Kelvin Harmon': 4500, 'Olabisi Johnson': 4500, 'Nick Boyle': 4000, 'Wendell Smallwood': 4700, 'Travis Homer': 4500, 'Taywan Taylor': 4500, 'Tyler Kroft': 4300, 'Parris Campbell': 5000, 'Russell Shepard': 4500, 'Blake Bell': 4000, 'Damion Willis': 4500, 'Cody Core': 4800, 'Troymaine Pope': 4500, 'Rhett Ellison': 4000, 'Auden Tate': 4500, 'Reggie Bonnafon': 4500, 'Trevon Wesco': 4500, 'Josh Bellamy': 4500, 'Bobo Wilson': 4500, 'C.J. Uzomah': 4300, 'Hayden Hurst': 4400, 'Josh Reynolds': 4900, 'Irv Smith Jr.': 4000, 'Mike Boone': 4500, 'Keelan Cole': 4700, 'Bilal Powell': 4500, 'Luke Stocker': 4000, 'Ricky Seals-Jones': 4700, 'Josh Doctson': 5000, 'Lee Smith': 4000, 'A.J. Brown': 5100, 'Mark Walton': 4500, 'Chester Rogers': 4700, 'Diontae Johnson': 4500, 'Jordan Wilkins': 4600, 'Damien Harris': 5400, 'Zach Pascal': 4500, 'Jakobi Meyers': 4500, 'Ty Johnson': 4500, "D'Ernest Johnson": 4500, 'Corey Clement': 4500, 'C.J. Prosise': 4500, 'Jonathan Williams': 4500, 'Jeremy Sprinkle': 4000, 'David Fluellen': 4500, 'Darius Jennings': 4500, 'Travis Fulgham': 4500, 'Raheem Mostert': 4500, 'Andre Roberts': 4500, 'Gary Jennings': 4500, 'Durham Smythe': 4000, 'Devine Ozigbo': 4500, 'Jaeden Graham': 4000, 'Damion Ratley': 4500, 'Darius Slayton': 4500, 'Benny Snell Jr.': 4500, 'Jaleel Scott': 4500, 'Mo Alie-Cox': 4000, 'Virgil Green': 4000, 'Dare Ogunbowale': 4500, 'Demetrius Harris': 4000, 'Myles Gaskin': 4500, 'Samaje Perine': 4500, 'Jordan Scarlett': 4700, 'T.J. Logan': 4500, 'Trayveon Williams': 4500, 'Russell Gage': 4500, 'Xavier Grimble': 4000, 'Elijhaa Penny': 4500, 'John Ursua': 4500, 'Justin Hardy': 4500, 'Ross Dwelley': 4000, 'Dalton Schultz': 4000, 'Chandler Cox': 4500, 'Kendrick Bourne': 4500, 'Tyler Ervin': 4500, 'J.D. McKissic': 4500, 'Brian Hill': 4500, 'MyCole Pruitt': 4000, 'Chris Moore': 5100, 'C.J. Board': 4500, 'James Develin': 4500, 'Chris Manhertz': 4000, 'Devin Smith': 4500, 'Scotty Miller': 4500, 'Derek Watt': 4500, 'Patrick Laird': 4500, 'Anthony Sherman': 4500, 'Byron Pringle': 4500, 'Ryan Izzo': 4000, 'Darrel Williams': 4800, 'Trent Sherfield': 4500, 'Patrick DiMarco': 4500, 'Tommy Sweeney': 4000, 'Mack Hollins': 4500, 'Trenton Cannon': 4600, 'Isaiah McKenzie': 4500, 'Geremy Davis': 4500, 'Kaden Smith': 4000, 'Qadree Ollison': 4700, 'Nick Bawden': 4500, 'Keith Smith': 4500, 'D.J. Foster': 4500, 'Braxton Berrios': 4500, 'Paul Perkins': 4700, 'Seth DeValve': 4000, 'Anthony Firkser': 4000, 'Ameer Abdullah': 4500, 'C.J. Ham': 4500, 'Tanner Hudson': 4000, 'Antony Auclair': 4000, 'Kalif Raymond': 4500, 'Brandon Zylstra': 4500, 'Malik Turner': 4500, 'Sean Culkin': 4000, 'Nsimba Webster': 4500, 'KeeSean Johnson': 4900, 'Roosevelt Nix': 4500, 'Dalyn Dawkins': 4500, 'Tyler Conklin': 4000, 'Steven Sims Jr.': 4500, 'Gunner Olszewski': 4500, 'Ray-Ray McCloud': 4500, 'Nick Bellore': 4500, 'Robert Davis': 4500, 'Alex Armah': 4500, 'Cethan Carter': 4000, 'Brandon Dillon': 4000, 'Mike Thomas': 4500, 'Eric Tomlinson': 4000, 'Jamize Olawale': 4500, 'KhaDarel Hodge': 4500, 'Garrett Dickerson': 4000, 'Patrick Ricard': 4500, 'Olamide Zaccheaus': 4500, 'Richie James Jr.': 4500, 'Hale Hentges': 4000, 'Pharaoh Brown': 4000, 'Brandon Bolden': 4500, 'Damiere Byrd': 4500, 'Logan Thomas': 5000, 'Levine Toilolo': 4000, 'Deon Yelder': 4000, 'Pharoh Cooper': 4500, 'Daniel Brown': 4500, 'Johnny Mundt': 4000, 'Jets D/ST': 4200, 'Ravens D/ST': 5000, 'Lions D/ST': 4100, 'Seahawks D/ST': 4500, '49ers D/ST': 3700, 'Buccaneers D/ST': 3500, 'Cowboys D/ST': 4700, 'Bills D/ST': 4000, 'Rams D/ST': 4400, 'Eagles D/ST': 4600, 'Browns D/ST': 4300, 'Vikings D/ST': 4300, 'Cardinals D/ST': 3600, 'Bengals D/ST': 3100, 'Patriots D/ST': 3800, 'Chargers D/ST': 4000, 'Dolphins D/ST': 3000, 'Titans D/ST': 3700, 'Chiefs D/ST': 3900, 'Giants D/ST': 3400, 'Falcons D/ST': 3500, 'Colts D/ST': 3600, 'Redskins D/ST': 3500, 'Panthers D/ST': 3500, 'Jaguars D/ST': 3900, 'Steelers D/ST': 3500}
proj_points_dict = {'Patrick Mahomes': 21.90247165233501, 'Cam Newton': 20.809093159830898, 'Dak Prescott': 20.063857320397915, 'Baker Mayfield': 19.32809653982203, 'Jameis Winston': 19.59761683681566, 'Christian McCaffrey': 20.55917521121951, 'Matt Ryan': 18.419889577592144, 'Tom Brady': 17.903921253215298, 'Ben Roethlisberger': 18.185654502023603, 'Philip Rivers': 17.57953685222817, 'Jared Goff': 17.781955928116396, 'Carson Wentz': 17.442797214341194, 'Kyler Murray': 17.962300658170307, 'Nick Foles': 16.913780896892444, 'Lamar Jackson': 19.52395928971782, 'Kirk Cousins': 16.551279730818052, 'Russell Wilson': 17.00768469216666, 'Josh Allen': 17.790598274433403, 'Saquon Barkley': 17.6910743636109, 'Matthew Stafford': 15.59578307592217, 'Ezekiel Elliott': 17.844275254185398, 'Jimmy Garoppolo': 15.185719653794461, 'Ryan Fitzpatrick': 15.85790153528738, 'Marcus Mariota': 15.084400110589296, 'Julio Jones': 15.586766302944604, 'Andy Dalton': 14.785897096945332, 'Austin Ekeler': 15.56670391091031, 'Dalvin Cook': 16.216310568834334, 'Sam Darnold': 14.06725430817691, 'Nick Chubb': 16.292401347707585, 'Kerryon Johnson': 15.480286588999308, 'JuJu Smith-Schuster': 13.737898253175262, 'Eli Manning': 13.026737500788961, "Le'Veon Bell": 15.035536407329612, 'Odell Beckham Jr.': 14.199637299681255, 'Leonard Fournette': 14.674644778694091, 'Chris Carson': 15.338630793794552, 'Travis Kelce': 13.562985325605462, 'David Johnson': 13.992550981375597, 'James Conner': 13.767191625830757, 'Jacoby Brissett': 12.067038379254214, 'Case Keenum': 12.094352833475515, 'Stefon Diggs': 12.101142678646232, 'Dede Westbrook': 11.985457011630125, 'Mike Evans': 11.994995050873346, 'Julian Edelman': 11.868562371964753, 'Todd Gurley II': 13.55541609869121, 'Tyler Boyd': 12.029295122740226, 'Adam Thielen': 11.570057427112522, 'Tyreek Hill': 12.245601184923162, 'Keenan Allen': 11.412834131625301, 'Joe Mixon': 12.413280257124327, 'Robert Woods': 11.38900600774327, 'Kenny Golladay': 11.197363963297713, 'Devonta Freeman': 12.061956781232197, 'George Kittle': 10.880220617313224, 'Amari Cooper': 11.165131961396504, 'Chris Godwin': 10.679051067522607, 'Calvin Ridley': 10.907062442941484, 'Corey Davis': 10.586355272062278, 'DJ Moore': 10.420393168492428, 'Evan Engram': 10.045359998792055, 'Zach Ertz': 9.847393546530528, 'Derrick Henry': 11.874249743200805, 'Brandin Cooks': 10.35716038955514, 'Sammy Watkins': 10.349416614450435, 'Jarvis Landry': 9.960278474196011, 'Cooper Kupp': 10.15518110264021, 'Larry Fitzgerald': 9.669921908977711, 'Damien Williams': 10.65025273256186, 'James White': 9.943245842668633, 'Marlon Mack': 11.07501445303602, 'Christian Kirk': 9.779691462834267, 'Mark Ingram II': 11.175065946174488, 'Sony Michel': 11.001909308111895, 'Tyler Lockett': 9.744817439073058, 'Josh Gordon': 9.205264952974034, 'Dion Lewis': 8.888173643538364, 'Donte Moncrief': 8.64977288446435, 'C.J. Anderson': 9.883575189410264, 'Tevin Coleman': 9.69316282557049, 'Robby Anderson': 8.886849528105525, 'DeVante Parker': 8.401316421027822, 'Vance McDonald': 8.36312009663266, 'Mohamed Sanu': 8.170556207080065, 'Justin Jackson': 9.11132510638224, 'Alshon Jeffery': 8.22386781087221, 'Albert Wilson': 8.536278042623213, 'O.J. Howard': 8.428238460274356, 'Peyton Barber': 9.012475458162164, 'Mike Williams': 8.523500967720226, 'Matt Breida': 9.347281523042458, 'T.Y. Hilton': 8.180679748445502, 'Jamison Crowder': 8.105758103534377, 'Kenyan Drake': 8.148702643083976, 'Randall Cobb': 7.728165430567909, 'Curtis Samuel': 7.847155780361246, 'Hunter Henry': 7.788086886207193, 'Devin Singletary': 8.765127871887715, 'Miles Sanders': 8.356366512124477, 'Dante Pettis': 7.67736718997819, 'Sterling Shepard': 7.226148105541963, 'Danny Amendola': 6.617404938490849, 'Quincy Enunwa': 6.938933089303004, 'Adam Humphries': 6.838465578044649, 'Ryquell Armstead': 7.333813929431549, 'Robert Foster': 7.624121386967466, 'David Njoku': 6.838607520878922, 'Jordan Howard': 8.203594194890654, 'Marvin Jones Jr.': 7.023554864993232, 'Austin Hooper': 6.465867521782562, 'DeSean Jackson': 7.1867017130364355, 'John Brown': 7.0821318807446785, 'Rashaad Penny': 7.619476842691445, 'John Ross III': 6.7700468552023, 'Jakeem Grant': 6.7869046779343325, 'Cole Beasley': 6.319134286972375, 'Zay Jones': 6.670744717892375, 'Michael Crabtree': 6.456285329350509, 'Michael Gallup': 6.450222830866213, 'Breshad Perriman': 6.654798661925253, 'Nyheim Hines': 5.9101598369293, 'Frank Gore': 6.971844991975268, 'Will Dissly': 6.249174123185401, 'Chris Thompson': 5.595596847384752, 'Justice Hill': 6.596128433656935, 'Alexander Mattison': 6.22034645696458, 'Phillip Dorsett II': 5.4781344722748715, 'Chris Conley': 5.602945283354795, 'Deebo Samuel': 5.343540151134333, 'Marquise Goodwin': 5.735584077994264, 'Willie Snead IV': 5.338719793232846, 'Greg Olsen': 5.544829723079739, 'Derrius Guice': 5.888108349326026, 'Marquise Brown': 5.454203233108544, 'Paul Richardson Jr.': 5.185292250815013, 'Kalen Ballage': 5.651794226011656, 'Rashard Higgins': 5.364247101844633, 'Dallas Goedert': 5.107969753210321, 'Darren Sproles': 5.360813088070166, 'Kyle Rudolph': 4.8293444126967255, 'David Moore': 5.261616742875618, 'Nelson Agholor': 5.058635124579102, 'Tony Pollard': 5.622492324783008, 'T.J. Hockenson': 4.896562645980571, 'Giovani Bernard': 5.032758452979985, 'LeSean McCoy': 5.284154627384753, 'Darrell Henderson Jr.': 5.294060723985195, 'Matt LaCosse': 4.745226749373013, 'Jordan Reed': 4.4567817328520585, 'Marqise Lee': 4.863835129571595, 'Adrian Peterson': 5.397363550182797, 'Vernon Davis': 4.803656618293288, 'Gerald Everett': 4.654833905870569, 'Eric Ebron': 4.743218046037121, 'Ito Smith': 4.959339997014239, 'Ty Montgomery': 5.008201281326744, 'Geoff Swaim': 4.314046165462712, 'Trey Quinn': 4.321626315673788, 'Jaylen Samuels': 4.6368299781343545, 'Nick Vannett': 4.4400543039763685, 'Blake Jarwin': 4.329111416916496, 'Ronald Jones II': 4.685514667188019, 'Ryan Griffin': 4.281958101548408, 'Delanie Walker': 4.141867325671873, 'Tajae Sharpe': 4.135446562554801, 'Terry McLaurin': 4.161549909677865, 'Dontrell Hilliard': 4.612316691521693, 'Dontrelle Inman': 4.171336830965792, 'James Washington': 4.215093071644044, 'T.J. Yeldon': 4.32669541365966, 'Mark Andrews': 4.35658288620545, 'Gus Edwards': 4.763150551914144, 'Malcolm Brown': 4.843023383056122, 'Charles Clay': 3.811410419034536, 'Chris Hogan': 4.207274961322304, 'Jarius Wright': 3.760717270018143, 'Mecole Hardman': 3.9757021401176114, 'DJ Chark Jr.': 3.667425600911023, 'Tyler Higbee': 3.863994257146606, 'Rex Burkhead': 4.162036975375551, 'Andy Isabella': 3.76615809690741, 'Mike Gesicki': 3.462126801865486, 'Josh Oliver': 3.566170664482391, 'Devin Funchess': 3.5006146048673075, 'Jason Witten': 3.5289905197190623, 'Chad Beebe': 3.4910409816518526, 'Tyler Eifert': 3.461631763036014, 'Zach Gentry': 3.4513107957853344, 'Ryan Switzer': 3.2071420507744874, 'Travis Benjamin': 3.6104148268949854, 'Alex Erickson': 3.2748720395527835, 'Jonnu Smith': 3.47883859543439, 'Miles Boykin': 3.4216303358165012, 'Allen Hurns': 3.4022935721312977, 'Jalen Hurd': 3.2198254756835083, 'Darwin Thompson': 3.5135464977082447, 'JJ Arcega-Whiteside': 3.195013582158581, 'Drew Sample': 3.169080305242377, 'Jesse James': 3.047295294433836, 'Chris Lacy': 3.0284273859476287, 'Maxx Williams': 2.9619748687131597, 'Demarcus Robinson': 3.1624508254851067, 'Cameron Brate': 2.9317993630488197, 'Wayne Gallman Jr.': 3.2341630742092455, 'Justin Watson': 2.80013051058891, "Nick O'Leary": 2.877417954882312, 'DK Metcalf': 2.8586874239478988, 'Jaron Brown': 2.9828028516039984, 'Jack Doyle': 2.670994757852526, 'Kyle Juszczyk': 2.66060458911322, 'Ian Thomas': 2.7120845308604165, "James O'Shaughnessy": 2.550868347342462, 'Bennie Fowler III': 2.7097396043049224, 'Chase Edmonds': 3.005559914423709, 'Cody Latimer': 2.843905200108317, 'Lance Kendricks': 2.5443980271378392, 'Demaryius Thomas': 2.6188801557224317, 'Preston Williams': 2.59258668344177, 'Deon Cain': 2.5378890901394904, 'Seth Roberts': 2.5053464386213387, 'Dawson Knox': 2.5258729551232597, 'Tavon Austin': 2.742581088432197, 'Kelvin Harmon': 2.368493304957229, 'Olabisi Johnson': 2.318010680699185, 'Nick Boyle': 2.1812404456828993, 'Wendell Smallwood': 2.3764878417278776, 'Travis Homer': 2.633968740995604, 'Taywan Taylor': 2.264295847193828, 'Tyler Kroft': 2.1418879936674413, 'Parris Campbell': 2.0858972596432457, 'Russell Shepard': 2.183340487373924, 'Blake Bell': 1.9596242475647403, 'Damion Willis': 2.0690876889704564, 'Cody Core': 2.0385397050890752, 'Troymaine Pope': 2.1174824654257636, 'Rhett Ellison': 1.8861382951725378, 'Auden Tate': 1.9055157847811184, 'Reggie Bonnafon': 2.1310549199388404, 'Trevon Wesco': 1.9631630296030247, 'Josh Bellamy': 1.9593383503127357, 'Bobo Wilson': 1.8641195105520472, 'C.J. Uzomah': 1.866480058194909, 'Hayden Hurst': 1.8919019974378755, 'Josh Reynolds': 1.9584352290491296, 'Irv Smith Jr.': 1.7895074524574528, 'Mike Boone': 2.0212943378792363, 'Keelan Cole': 1.7175671645109667, 'Bilal Powell': 1.9862195130513842, 'Luke Stocker': 1.7256001452108367, 'Ricky Seals-Jones': 1.591655839274674, 'Josh Doctson': 1.623283105871549, 'Lee Smith': 1.5496153911605821, 'A.J. Brown': 1.535615519861903, 'Mark Walton': 1.4856525849339035, 'Chester Rogers': 1.4419847152557779, 'Diontae Johnson': 1.508588106068102, 'Jordan Wilkins': 1.5221476115601529, 'Damien Harris': 1.6839596565467132, 'Zach Pascal': 1.3482174548382704, 'Jakobi Meyers': 1.4073986652668125, 'Ty Johnson': 1.4743448035399878, "D'Ernest Johnson": 1.3862245540407159, 'Corey Clement': 1.4621951593565947, 'C.J. Prosise': 1.5318719228315176, 'Jonathan Williams': 1.5100508451085841, 'Jeremy Sprinkle': 1.3271816154884808, 'David Fluellen': 1.6101345533283244, 'Darius Jennings': 1.241755618225422, 'Travis Fulgham': 1.2983425078858486, 'Raheem Mostert': 1.4684022537441657, 'Andre Roberts': 1.222117783201221, 'Gary Jennings': 1.26384075585065, 'Durham Smythe': 1.1881327137552276, 'Devine Ozigbo': 1.3473719770198138, 'Jaeden Graham': 1.2225152340897039, 'Damion Ratley': 1.2124194764340785, 'Darius Slayton': 1.2099257455251957, 'Benny Snell Jr.': 1.2452054723532866, 'Jaleel Scott': 1.1713689437930364, 'Mo Alie-Cox': 1.2059432314623124, 'Virgil Green': 1.1080969020269145, 'Dare Ogunbowale': 1.306846417393629, 'Demetrius Harris': 1.1542210127390171, 'Myles Gaskin': 1.0122361282066537, 'Samaje Perine': 1.0894565629239017, 'Jordan Scarlett': 1.1139662699984025, 'T.J. Logan': 1.0955046130353525, 'Trayveon Williams': 1.0143939328739304, 'Russell Gage': 0.9338802373751348, 'Xavier Grimble': 0.913600408243964, 'Elijhaa Penny': 0.828081701128842, 'John Ursua': 0.8726519504683059, 'Justin Hardy': 0.8507516667878524, 'Ross Dwelley': 0.8260306940308303, 'Dalton Schultz': 0.7804882691213989, 'Chandler Cox': 0.7732086793455328, 'Kendrick Bourne': 0.7608135240388293, 'Tyler Ervin': 0.791443198256761, 'J.D. McKissic': 0.8389020690658419, 'Brian Hill': 0.7280464981912986, 'MyCole Pruitt': 0.7094864307669669, 'Chris Moore': 0.7831972512293249, 'C.J. Board': 0.7192502317245093, 'James Develin': 0.688236673147246, 'Chris Manhertz': 0.7162042664140943, 'Devin Smith': 0.7008305275143863, 'Scotty Miller': 0.6829173997997366, 'Derek Watt': 0.6538077782415507, 'Patrick Laird': 0.6628030696042586, 'Anthony Sherman': 0.664112190593759, 'Byron Pringle': 0.6557859200193997, 'Ryan Izzo': 0.6443010236213873, 'Darrel Williams': 0.6606923974218474, 'Trent Sherfield': 0.596977825141589, 'Patrick DiMarco': 0.5664915715378345, 'Tommy Sweeney': 0.5943230482642964, 'Mack Hollins': 0.6155914990566524, 'Trenton Cannon': 0.6674437881740715, 'Isaiah McKenzie': 0.6177808731225367, 'Geremy Davis': 0.6170885513551106, 'Kaden Smith': 0.5597420612136702, 'Qadree Ollison': 0.5946023309359515, 'Nick Bawden': 0.5574329835549464, 'Keith Smith': 0.5278086099339346, 'D.J. Foster': 0.5182154133013278, 'Braxton Berrios': 0.5601443183634537, 'Paul Perkins': 0.4907894534169883, 'Seth DeValve': 0.5162559111375653, 'Anthony Firkser': 0.489909069015213, 'Ameer Abdullah': 0.4673912574873316, 'C.J. Ham': 0.4647697666813345, 'Tanner Hudson': 0.4428139286234192, 'Antony Auclair': 0.4090980507570587, 'Kalif Raymond': 0.4280299854718356, 'Brandon Zylstra': 0.43071780368450063, 'Malik Turner': 0.4212747184317978, 'Sean Culkin': 0.41574274306909603, 'Nsimba Webster': 0.40807599022028246, 'KeeSean Johnson': 0.4039368203622864, 'Roosevelt Nix': 0.3597346824624083, 'Dalyn Dawkins': 0.40763713152403985, 'Tyler Conklin': 0.35208991951581897, 'Steven Sims Jr.': 0.34280824150696737, 'Gunner Olszewski': 0.341187555216197, 'Ray-Ray McCloud': 0.33393656354000445, 'Nick Bellore': 0.33180723733785195, 'Robert Davis': 0.31164385591542487, 'Alex Armah': 0.3206912286158898, 'Cethan Carter': 0.306346765639758, 'Brandon Dillon': 0.30552566261468705, 'Mike Thomas': 0.2967825383420236, 'Eric Tomlinson': 0.26776232878613127, 'Jamize Olawale': 0.2732249854777946, 'KhaDarel Hodge': 0.2779786620916556, 'Garrett Dickerson': 0.2282759176049564, 'Patrick Ricard': 0.24322046346351778, 'Olamide Zaccheaus': 0.2251814701306289, 'Richie James Jr.': 0.2192336124099178, 'Hale Hentges': 0.20194505949866273, 'Pharaoh Brown': 0.20460888422112603, 'Brandon Bolden': 0.1919853989745884, 'Damiere Byrd': 0.18905243144586342, 'Logan Thomas': 0.16711918173687054, 'Levine Toilolo': 0.1514553417824142, 'Deon Yelder': 0.14394474354358694, 'Pharoh Cooper': 0.11265231356155435, 'Daniel Brown': 0.10631528984556109, 'Johnny Mundt': 0.08725241691431912, 'Jets D/ST': 9.79, 'Ravens D/ST': 9.75, 'Lions D/ST': 9.1, 'Seahawks D/ST': 9.01, '49ers D/ST': 8.15, 'Buccaneers D/ST': 7.89, 'Cowboys D/ST': 8.2, 'Bills D/ST': 7.76, 'Rams D/ST': 7.44, 'Eagles D/ST': 7.68, 'Browns D/ST': 7.26, 'Vikings D/ST': 6.73, 'Cardinals D/ST': 6.36, 'Bengals D/ST': 5.94, 'Patriots D/ST': 6.37, 'Chargers D/ST': 6.48, 'Dolphins D/ST': 6.21, 'Titans D/ST': 5.87, 'Chiefs D/ST': 5.87, 'Giants D/ST': 5.52, 'Falcons D/ST': 5.44, 'Colts D/ST': 5.44, 'Redskins D/ST': 4.93, 'Panthers D/ST': 5.09, 'Jaguars D/ST': 4.65, 'Steelers D/ST': 4.11}
pos_dict = {'Patrick Mahomes': 'QB', 'Cam Newton': 'QB', 'Dak Prescott': 'QB', 'Baker Mayfield': 'QB', 'Jameis Winston': 'QB', 'Christian McCaffrey': 'RB', 'Matt Ryan': 'QB', 'Tom Brady': 'QB', 'Ben Roethlisberger': 'QB', 'Philip Rivers': 'QB', 'Jared Goff': 'QB', 'Carson Wentz': 'QB', 'Kyler Murray': 'QB', 'Nick Foles': 'QB', 'Lamar Jackson': 'QB', 'Kirk Cousins': 'QB', 'Russell Wilson': 'QB', 'Josh Allen': 'QB', 'Saquon Barkley': 'RB', 'Matthew Stafford': 'QB', 'Ezekiel Elliott': 'RB', 'Jimmy Garoppolo': 'QB', 'Ryan Fitzpatrick': 'QB', 'Marcus Mariota': 'QB', 'Julio Jones': 'QB', 'Andy Dalton': 'QB', 'Austin Ekeler': 'RB', 'Dalvin Cook': 'RB', 'Sam Darnold': 'QB', 'Nick Chubb': 'RB', 'Kerryon Johnson': 'RB', 'JuJu Smith-Schuster': 'WR', 'Eli Manning': 'QB', "Le'Veon Bell": 'QB', 'Odell Beckham Jr.': 'WR', 'Leonard Fournette': 'RB', 'Chris Carson': 'RB', 'Travis Kelce': 'TE', 'David Johnson': 'RB', 'James Conner': 'RB', 'Jacoby Brissett': 'QB', 'Case Keenum': 'QB', 'Stefon Diggs': 'WR', 'Dede Westbrook': 'WR', 'Mike Evans': 'WR', 'Julian Edelman': 'WR', 'Todd Gurley II': 'RB', 'Tyler Boyd': 'WR', 'Adam Thielen': 'WR', 'Tyreek Hill': 'RB', 'Keenan Allen': 'WR', 'Joe Mixon': 'RB', 'Robert Woods': 'WR', 'Kenny Golladay': 'WR', 'Devonta Freeman': 'RB', 'George Kittle': 'TE', 'Amari Cooper': 'WR', 'Chris Godwin': 'WR', 'Calvin Ridley': 'WR', 'Corey Davis': 'WR', 'DJ Moore': 'WR', 'Evan Engram': 'TE', 'Zach Ertz': 'TE', 'Derrick Henry': 'RB', 'Brandin Cooks': 'WR', 'Sammy Watkins': 'WR', 'Jarvis Landry': 'WR', 'Cooper Kupp': 'WR', 'Larry Fitzgerald': 'WR', 'Damien Williams': 'RB', 'James White': 'RB', 'Marlon Mack': 'RB', 'Christian Kirk': 'WR', 'Mark Ingram II': 'RB', 'Sony Michel': 'RB', 'Tyler Lockett': 'WR', 'Josh Gordon': 'WR', 'Dion Lewis': 'RB', 'Donte Moncrief': 'WR', 'C.J. Anderson': 'RB', 'Tevin Coleman': 'RB', 'Robby Anderson': 'WR', 'DeVante Parker': 'WR', 'Vance McDonald': 'TE', 'Mohamed Sanu': 'WR', 'Justin Jackson': 'RB', 'Alshon Jeffery': 'WR', 'Albert Wilson': 'WR', 'O.J. Howard': 'TE', 'Peyton Barber': 'RB', 'Mike Williams': 'WR', 'Matt Breida': 'RB', 'T.Y. Hilton': 'WR', 'Jamison Crowder': 'WR', 'Kenyan Drake': 'RB', 'Randall Cobb': 'WR', 'Curtis Samuel': 'WR', 'Hunter Henry': 'WR', 'Devin Singletary': 'RB', 'Miles Sanders': 'RB', 'Dante Pettis': 'WR', 'Sterling Shepard': 'WR', 'Danny Amendola': 'WR', 'Quincy Enunwa': 'WR', 'Adam Humphries': 'WR', 'Ryquell Armstead': 'RB', 'Robert Foster': 'WR', 'David Njoku': 'WR', 'Jordan Howard': 'RB', 'Marvin Jones Jr.': 'WR', 'Austin Hooper': 'WR', 'DeSean Jackson': 'WR', 'John Brown': 'WR', 'Rashaad Penny': 'RB', 'John Ross III': 'WR', 'Jakeem Grant': 'WR', 'Cole Beasley': 'WR', 'Zay Jones': 'WR', 'Michael Crabtree': 'WR', 'Michael Gallup': 'WR', 'Breshad Perriman': 'WR', 'Nyheim Hines': 'RB', 'Frank Gore': 'RB', 'Will Dissly': 'TE', 'Chris Thompson': 'RB', 'Justice Hill': 'RB', 'Alexander Mattison': 'RB', 'Phillip Dorsett II': 'WR', 'Chris Conley': 'WR', 'Deebo Samuel': 'WR', 'Marquise Goodwin': 'WR', 'Willie Snead IV': 'WR', 'Greg Olsen': 'WR', 'Derrius Guice': 'RB', 'Marquise Brown': 'WR', 'Paul Richardson Jr.': 'WR', 'Kalen Ballage': 'RB', 'Rashard Higgins': 'WR', 'Dallas Goedert': 'TE', 'Darren Sproles': 'RB', 'Kyle Rudolph': 'WR', 'David Moore': 'WR', 'Nelson Agholor': 'WR', 'Tony Pollard': 'RB', 'T.J. Hockenson': 'TE', 'Giovani Bernard': 'RB', 'LeSean McCoy': 'RB', 'Darrell Henderson Jr.': 'RB', 'Matt LaCosse': 'WR', 'Jordan Reed': 'WR', 'Marqise Lee': 'WR', 'Adrian Peterson': 'RB', 'Vernon Davis': 'WR', 'Gerald Everett': 'WR', 'Eric Ebron': 'WR', 'Ito Smith': 'RB', 'Ty Montgomery': 'WR', 'Geoff Swaim': 'WR', 'Trey Quinn': 'WR', 'Jaylen Samuels': 'RB', 'Nick Vannett': 'WR', 'Blake Jarwin': 'WR', 'Ronald Jones II': 'RB', 'Ryan Griffin': 'TE', 'Delanie Walker': 'WR', 'Tajae Sharpe': 'WR', 'Terry McLaurin': 'WR', 'Dontrell Hilliard': 'RB', 'Dontrelle Inman': 'WR', 'James Washington': 'WR', 'T.J. Yeldon': 'RB', 'Mark Andrews': 'TE', 'Gus Edwards': 'RB', 'Malcolm Brown': 'RB', 'Charles Clay': 'TE', 'Chris Hogan': 'WR', 'Jarius Wright': 'WR', 'Mecole Hardman': 'WR', 'DJ Chark Jr.': 'WR', 'Tyler Higbee': 'TE', 'Rex Burkhead': 'RB', 'Andy Isabella': 'WR', 'Mike Gesicki': 'TE', 'Josh Oliver': 'TE', 'Devin Funchess': 'WR', 'Jason Witten': 'TE', 'Chad Beebe': 'WR', 'Tyler Eifert': 'TE', 'Zach Gentry': 'TE', 'Ryan Switzer': 'WR', 'Travis Benjamin': 'WR', 'Alex Erickson': 'WR', 'Jonnu Smith': 'TE', 'Miles Boykin': 'WR', 'Allen Hurns': 'WR', 'Jalen Hurd': 'WR', 'Darwin Thompson': 'RB', 'JJ Arcega-Whiteside': 'WR', 'Drew Sample': 'TE', 'Jesse James': 'TE', 'Chris Lacy': 'WR', 'Maxx Williams': 'TE', 'Demarcus Robinson': 'WR', 'Cameron Brate': 'TE', 'Wayne Gallman Jr.': 'RB', 'Justin Watson': 'WR', "Nick O'Leary": 'TE', 'DK Metcalf': 'WR', 'Jaron Brown': 'WR', 'Jack Doyle': 'TE', 'Kyle Juszczyk': 'RB', 'Ian Thomas': 'TE', "James O'Shaughnessy": 'TE', 'Bennie Fowler III': 'WR', 'Chase Edmonds': 'RB', 'Cody Latimer': 'WR', 'Lance Kendricks': 'TE', 'Demaryius Thomas': 'WR', 'Preston Williams': 'WR', 'Deon Cain': 'WR', 'Seth Roberts': 'WR', 'Dawson Knox': 'TE', 'Tavon Austin': 'WR', 'Kelvin Harmon': 'WR', 'Olabisi Johnson': 'WR', 'Nick Boyle': 'TE', 'Wendell Smallwood': 'RB', 'Travis Homer': 'RB', 'Taywan Taylor': 'WR', 'Tyler Kroft': 'TE', 'Parris Campbell': 'WR', 'Russell Shepard': 'WR', 'Blake Bell': 'TE', 'Damion Willis': 'WR', 'Cody Core': 'WR', 'Troymaine Pope': 'RB', 'Rhett Ellison': 'TE', 'Auden Tate': 'WR', 'Reggie Bonnafon': 'RB', 'Trevon Wesco': 'TE', 'Josh Bellamy': 'WR', 'Bobo Wilson': 'WR', 'C.J. Uzomah': 'TE', 'Hayden Hurst': 'TE', 'Josh Reynolds': 'WR', 'Irv Smith Jr.': 'TE', 'Mike Boone': 'RB', 'Keelan Cole': 'WR', 'Bilal Powell': 'RB', 'Luke Stocker': 'TE', 'Ricky Seals-Jones': 'TE', 'Josh Doctson': 'WR', 'Lee Smith': 'TE', 'A.J. Brown': 'WR', 'Mark Walton': 'RB', 'Chester Rogers': 'WR', 'Diontae Johnson': 'WR', 'Jordan Wilkins': 'RB', 'Damien Harris': 'RB', 'Zach Pascal': 'WR', 'Jakobi Meyers': 'WR', 'Ty Johnson': 'RB', "D'Ernest Johnson": 'RB', 'Corey Clement': 'RB', 'C.J. Prosise': 'RB', 'Jonathan Williams': 'RB', 'Jeremy Sprinkle': 'TE', 'David Fluellen': 'RB', 'Darius Jennings': 'WR', 'Travis Fulgham': 'WR', 'Raheem Mostert': 'RB', 'Andre Roberts': 'WR', 'Gary Jennings': 'WR', 'Durham Smythe': 'TE', 'Devine Ozigbo': 'RB', 'Jaeden Graham': 'TE', 'Damion Ratley': 'WR', 'Darius Slayton': 'WR', 'Benny Snell Jr.': 'RB', 'Jaleel Scott': 'WR', 'Mo Alie-Cox': 'TE', 'Virgil Green': 'TE', 'Dare Ogunbowale': 'RB', 'Demetrius Harris': 'TE', 'Myles Gaskin': 'RB', 'Samaje Perine': 'RB', 'Jordan Scarlett': 'RB', 'T.J. Logan': 'RB', 'Trayveon Williams': 'RB', 'Russell Gage': 'WR', 'Xavier Grimble': 'TE', 'Elijhaa Penny': 'RB', 'John Ursua': 'WR', 'Justin Hardy': 'WR', 'Ross Dwelley': 'TE', 'Dalton Schultz': 'TE', 'Chandler Cox': 'RB', 'Kendrick Bourne': 'WR', 'Tyler Ervin': 'RB', 'J.D. McKissic': 'RB', 'Brian Hill': 'RB', 'MyCole Pruitt': 'TE', 'Chris Moore': 'WR', 'C.J. Board': 'WR', 'James Develin': 'RB', 'Chris Manhertz': 'TE', 'Devin Smith': 'WR', 'Scotty Miller': 'WR', 'Derek Watt': 'RB', 'Patrick Laird': 'RB', 'Anthony Sherman': 'RB', 'Byron Pringle': 'WR', 'Ryan Izzo': 'TE', 'Darrel Williams': 'RB', 'Trent Sherfield': 'WR', 'Patrick DiMarco': 'RB', 'Tommy Sweeney': 'TE', 'Mack Hollins': 'WR', 'Trenton Cannon': 'RB', 'Isaiah McKenzie': 'WR', 'Geremy Davis': 'WR', 'Kaden Smith': 'TE', 'Qadree Ollison': 'RB', 'Nick Bawden': 'RB', 'Keith Smith': 'RB', 'D.J. Foster': 'RB', 'Braxton Berrios': 'WR', 'Paul Perkins': 'RB', 'Seth DeValve': 'TE', 'Anthony Firkser': 'TE', 'Ameer Abdullah': 'RB', 'C.J. Ham': 'RB', 'Tanner Hudson': 'TE', 'Antony Auclair': 'TE', 'Kalif Raymond': 'WR', 'Brandon Zylstra': 'WR', 'Malik Turner': 'WR', 'Sean Culkin': 'TE', 'Nsimba Webster': 'WR', 'KeeSean Johnson': 'WR', 'Roosevelt Nix': 'RB', 'Dalyn Dawkins': 'RB', 'Tyler Conklin': 'TE', 'Steven Sims Jr.': 'WR', 'Gunner Olszewski': 'WR', 'Ray-Ray McCloud': 'WR', 'Nick Bellore': 'RB', 'Robert Davis': 'WR', 'Alex Armah': 'RB', 'Cethan Carter': 'TE', 'Brandon Dillon': 'TE', 'Mike Thomas': 'WR', 'Eric Tomlinson': 'TE', 'Jamize Olawale': 'RB', 'KhaDarel Hodge': 'WR', 'Garrett Dickerson': 'RB', 'Patrick Ricard': 'RB', 'Olamide Zaccheaus': 'WR', 'Richie James Jr.': 'WR', 'Hale Hentges': 'TE', 'Pharaoh Brown': 'TE', 'Brandon Bolden': 'RB', 'Damiere Byrd': 'WR', 'Logan Thomas': 'QB', 'Levine Toilolo': 'TE', 'Deon Yelder': 'TE', 'Pharoh Cooper': 'WR', 'Daniel Brown': 'TE', 'Johnny Mundt': 'TE', 'Jets D/ST': 'D', 'Ravens D/ST': 'D', 'Lions D/ST': 'D', 'Seahawks D/ST': 'D', '49ers D/ST': 'D', 'Buccaneers D/ST': 'D', 'Cowboys D/ST': 'D', 'Bills D/ST': 'D', 'Rams D/ST': 'D', 'Eagles D/ST': 'D', 'Browns D/ST': 'D', 'Vikings D/ST': 'D', 'Cardinals D/ST': 'D', 'Bengals D/ST': 'D', 'Patriots D/ST': 'D', 'Chargers D/ST': 'D', 'Dolphins D/ST': 'D', 'Titans D/ST': 'D', 'Chiefs D/ST': 'D', 'Giants D/ST': 'D', 'Falcons D/ST': 'D', 'Colts D/ST': 'D', 'Redskins D/ST': 'D', 'Panthers D/ST': 'D', 'Jaguars D/ST': 'D', 'Steelers D/ST': 'D'}
lineup_matrix = dfs_configs.get('fd').get('nfl').get('lineup_matrix')
pools = get_player_pools(lineup_matrix, [], proj_points_dict, pos_dict, salary_dict)
best_lineup = get_best_lineup(pools)
salary_cap = dfs_configs.get('fd').get('nfl').get('salary_cap')
max_counts = {spot: lineup_matrix.count(spot)
              for spot in set(lineup_matrix) for pos in set(list(pos_dict.values()))
              if '/' not in pos and is_valid_position(pos, spot)}


def old_optimize(best_lineup, pools, proj_pts_dict, salary_dict, salary_cap):
    optimal_lineup = [player for player in best_lineup]
    current_salary = sum([salary_dict.get(player) for player in optimal_lineup])
    salary_min = statistics.mean(list(salary_dict.values()))
    while current_salary > salary_cap:
        current_lowest_cost, downgrade_index, new_player = None, None, None
        for player in optimal_lineup:
            player_pool = pools[optimal_lineup.index(player)]
            if player in player_pool:
                player_index = player_pool.index(player)
            else:
                return None
            if player_index == len(player_pool) - 1 or player_pool[player_index + 1] in optimal_lineup or salary_dict.get(player) < salary_min:
                continue
            current_ratio = proj_pts_dict.get(player) / salary_dict.get(player)
            downgrade_ratio = proj_pts_dict.get(player_pool[player_index + 1]) / salary_dict.get(player_pool[player_index + 1])
            cost_to_downgrade = current_ratio - downgrade_ratio
            if not current_lowest_cost or cost_to_downgrade < current_lowest_cost:
                current_lowest_cost = cost_to_downgrade
                downgrade_index = optimal_lineup.index(player)
                new_player = player_pool[player_index + 1]
        if not new_player:
            return None
        optimal_lineup[downgrade_index] = new_player
        current_salary = sum([salary_dict.get(player) for player in optimal_lineup])
    return optimal_lineup


class OptimizerTests(unittest.TestCase):
    def test_old_v_new(self):
        old_lineup = old_optimize(best_lineup, pools, proj_points_dict, salary_dict, salary_cap)
        new_lineup = optimize(best_lineup, pools, proj_points_dict, salary_dict, salary_cap)
        for player in old_lineup:
            print(pos_dict.get(player), player, proj_points_dict.get(player), salary_dict.get(player))
        old_pts = sum([proj_points_dict.get(player) for player in old_lineup])
        old_salary = sum([salary_dict.get(player) for player in old_lineup])
        print(old_pts, old_salary)
        print('~~~~~~~~~~~~~~~~~~~~~~~~')
        for player in new_lineup:
            print(pos_dict.get(player), player, proj_points_dict.get(player), salary_dict.get(player))
        new_pts = sum([proj_points_dict.get(player) for player in new_lineup])
        new_salary = sum([salary_dict.get(player) for player in new_lineup])
        print(new_pts, new_salary)
        self.assertTrue(new_pts > old_pts)

    def test_new_v_newer(self):
        old_lineup = optimize(best_lineup, pools, proj_points_dict, salary_dict, salary_cap)
        new_lineup = optimize(best_lineup, pools, proj_points_dict, salary_dict, salary_cap)
        for player in old_lineup:
            print(pos_dict.get(player), player, proj_points_dict.get(player), salary_dict.get(player))
        old_pts = sum([proj_points_dict.get(player) for player in old_lineup])
        old_salary = sum([salary_dict.get(player) for player in old_lineup])
        print(old_pts, old_salary)
        print('~~~~~~~~~~~~~~~~~~~~~~~~')
        for player in new_lineup:
            print(pos_dict.get(player), player, proj_points_dict.get(player), salary_dict.get(player))
        new_pts = sum([proj_points_dict.get(player) for player in new_lineup])
        new_salary = sum([salary_dict.get(player) for player in new_lineup])
        print(new_pts, new_salary)
        self.assertTrue(new_pts > old_pts)

    def test_is_valid_addition(self):
        lineup = ['Patrick Mahomes', 'Saquon Barkley', 'Todd Gurley II', 'Joe Mixon']
        self.assertTrue(is_valid_lineup(pos_dict, lineup, lineup_matrix, max_counts))

    def test_is_not_valid_addition(self):
        lineup = ['Patrick Mahomes', 'Saquon Barkley', 'Andy Dalton', 'Joe Mixon']
        self.assertFalse(is_valid_lineup(pos_dict, lineup, lineup_matrix, max_counts))

    def test_is_valid_addition_flex(self):
        lineup = ['JuJu Smith-Schuster', 'Saquon Barkley', 'Adam Thielen', 'Stefon Diggs', 'Tyler Boyd']
        self.assertTrue(is_valid_lineup(pos_dict, lineup, lineup_matrix, max_counts))

    def test_is_not_valid_addition_flex(self):
        lineup = ['JuJu Smith-Schuster', 'Saquon Barkley', 'Adam Thielen', 'Stefon Diggs', 'Tyler Boyd', 'Sterling Shepard']
        self.assertFalse(is_valid_lineup(pos_dict, lineup, lineup_matrix, max_counts))